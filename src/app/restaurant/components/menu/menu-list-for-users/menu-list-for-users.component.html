<div class="h-[calc(100vh-75px)] !mb-10 fixed top-[75px] w-full mx-auto overflow-y-scroll bg-gray-50 p-4">
  <div class="max-w-7xl h-full  mx-auto grid grid-cols-1 lg:grid-cols-3 gap-6">
    <div class="lg:col-span-2">
      <div class="mb-8 flex flex-wrap gap-3 items-center justify-between">
        <div class="flex flex-wrap gap-3">
          <button (click)="setCategoryFilter(null)" [class]="getFilterButtonClass(null)"
            class="rounded-full px-6 py-2.5 text-sm font-medium transition-all">
            All Items
          </button>
          <button *ngFor="let category of availableCategories" (click)="setCategoryFilter(category)"
            [class]="getFilterButtonClass(category)"
            class="rounded-full px-6 py-2.5 text-sm font-medium transition-all">
            {{ category }}
          </button>
        </div>
      </div>
      <!-- Masonry Layout -->
      <div class="masonry-container columns-1 md:columns-2">
        <mat-card *ngFor="let item of filteredMenus" class="shadow-lg rounded-xl break-inside-avoid mb-4">
          <mat-card-content class="p-3">
            <div class="flex flex-col gap-3 last:gap-0">
              <div class="flex flex-row gap-3 items-center">
                <div class="flex-shrink-0">
                  <div class="w-16 h-16 rounded-full bg-gray-100">
                    <img [src]="getImageUrl(item.image)" [alt]="item.name"
                      class="!w-full !h-full rounded-full object-fit shadow-lg" />
                  </div>
                </div>

                <div class="flex-1">
                  <div class="flex items-start justify-between mb-1">
                    <h3 class="!text-sm font-semibold text-gray-900">{{ item.name }}</h3>
                    <span class="text-sm font-bold text-orange-600 price-display ml-2">Â£{{ item.price.toFixed(2)
                      }}</span>
                  </div>
                </div>
              </div>

              <!-- Ingredients Section -->

              <p class="text-gray-600 text-xs leading-relaxed mb-2 line-clamp-2">{{ item.ingredients }}</p>

              <!-- Add to Cart Button -->
              <div class="flex items-center justify-center">
                <button mat-raised-button *ngIf="item.price" [ngClass]="{
                  'bg-green-600 hover:bg-green-700 text-white shadow-lg': cartItems.includes(item),
                  'bg-orange-500 hover:bg-orange-600 text-white shadow-lg': !cartItems.includes(item)
                }"
                  class="enhanced-add-button px-4 py-2 rounded-lg text-xs font-semibold transition-all duration-200 transform hover:scale-105 flex items-center gap-1 w-full"
                  (click)="addToCart(item)">
                  <mat-icon class="!text-sm">{{ checkIfItemInCart(item) ? 'check' : 'add_shopping_cart' }}</mat-icon>
                  <span>{{ checkIfItemInCart(item) ? 'Added' : 'Add to Order' }}</span>
                </button>
              </div>
            </div>
          </mat-card-content>
        </mat-card>
      </div>
    </div>
    <div class="hidden md:block md:col-span-1">
      <app-cart></app-cart>
    </div>
    <div class="fixed bottom-6 right-6 z-50">
      <div class="flex flex-col gap-4">
        <!-- Cart Button Group -->
        <div class="lg:hidden relative group">
          <div
            class="absolute bottom-full right-0 mb-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none">
            <div class="bg-gray-800 text-white text-xs px-2 py-1 rounded whitespace-nowrap">
              Open Cart
              <div
                class="absolute top-full right-2 w-0 h-0 border-l-2 border-r-2 border-t-4 border-transparent border-t-gray-800">
              </div>
            </div>
          </div>
        </div>

        <!-- Waiter Button Group -->
        <div class="relative">
          <button mat-fab [matMenuTriggerFor]="menu"
            class="w-14 h-14 bg-orange-500 hover:bg-orange-600 text-white shadow-lg hover:shadow-xl transition-all duration-200">
            <mat-icon>more_vert</mat-icon>
          </button>

          <mat-menu #menu="matMenu" yPosition="above">
            <button mat-menu-item (click)="callWaiter()">
              <mat-icon>restaurant_menu</mat-icon>
              <span>Call Waiter</span>
            </button>
            <div class="lg:hidden">
              <button mat-menu-item (click)="openCartModal()">
                <mat-icon>shopping_cart</mat-icon>
                <span>Open Cart</span>
              </button>
            </div>
            <button mat-menu-item (click)="requestPayment()">
              <mat-icon>payment</mat-icon>
              <span>Request Payment</span>
            </button>
            <button mat-menu-item (click)="viewOrders()">
              <mat-icon>receipt_long</mat-icon>
              <span>View Orders</span>
            </button>
          </mat-menu>
        </div>
      </div>
    </div>
  </div>
</div>