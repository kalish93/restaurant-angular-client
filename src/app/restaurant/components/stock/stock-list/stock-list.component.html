<div class="min-h-screen bg-gray-100 p-6">
  <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-8">
    <div>
      <h1 class="text-3xl font-bold text-gray-900 md:text-4xl">Stocks</h1>
      <p class="mt-2 text-gray-600">Manage your stock inventory</p>
    </div>
    <button
      *appHasRole="[hasManagerRole()]"
      (click)="openAddStockDialog()"
      class="flex items-center gap-2 rounded-full bg-white px-6 py-3 font-medium text-amber-600 shadow-[12px_12px_24px_rgba(0,0,0,0.15),-12px_-12px_24px_rgba(255,255,255,0.9)] transition-all hover:shadow-[6px_6px_12px_rgba(0,0,0,0.1),-6px_-6px_12px_rgba(255,255,255,0.8)]">
      <mat-icon class="!text-lg">add</mat-icon>
      <span>Add Stock</span>
    </button>
  </div>

  <div class="bg-white rounded-xl p-6 shadow overflow-x-auto">
    <mat-paginator
      [pageSizeOptions]="[5, 10, 20]"
      [pageSize]="pageSize"
      showFirstLastButtons
      (page)="pageChanged($event)"
      class="mb-4 flex justify-end"
    ></mat-paginator>

    <table mat-table [dataSource]="stocks" matSort class="min-w-full table-fixed border-collapse">
      <!-- Image Column -->
      <ng-container matColumnDef="image">
        <th mat-header-cell *matHeaderCellDef class="w-1/4 py-1 px-2 border-b border-gray-200"></th>
        <td mat-cell *matCellDef="let stock" class="w-1/4 py-1 px-2 border-b border-gray-200 text-center">
          <img class="inline-block w-12 h-16 object-cover rounded" [src]="getImageUrl(stock.image)" alt="Stock Image" />
        </td>
      </ng-container>

      <!-- Name Column -->
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef mat-sort-header class="w-1/4 py-1 px-2 border-b border-gray-200 text-left font-semibold">Name</th>
        <td mat-cell *matCellDef="let stock" class="w-1/4 py-1 px-2 border-b border-gray-200 text-gray-700">{{ stock.name }}</td>
      </ng-container>

      <!-- Quantity Column -->
      <ng-container matColumnDef="quantity">
        <th mat-header-cell *matHeaderCellDef mat-sort-header class="w-1/4 py-1 px-2 border-b border-gray-200 text-left font-semibold">Available Quantity</th>
        <td mat-cell *matCellDef="let stock" class="w-1/4 py-1 px-2 border-b border-gray-200 text-gray-700">{{ stock.quantity }}</td>
      </ng-container>

      <!-- Actions Column -->
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef class="w-1/4 py-1 px-2 border-b border-gray-200 text-left font-semibold">Actions</th>
        <td mat-cell *matCellDef="let stock" class="w-1/4 py-1 px-2 border-b border-gray-200 space-x-2">
          <button
            *appHasRole="[hasManagerRole()]"
            mat-icon-button
            color="primary"
            (click)="openEditStockDialog(stock,  $event)"
            class="text-green-600 hover:text-green-800 transition"
            aria-label="Edit Stock"
          >
            <mat-icon>edit</mat-icon>
          </button>
          <button
            *appHasRole="[hasManagerRole()]"
            mat-icon-button
            color="warn"
            (click)="deleteStock(stock.id,  $event)"
            class="text-red-600 hover:text-red-800 transition"
            aria-label="Delete Stock"
          >
            <mat-icon>delete</mat-icon>
          </button>
        </td>
      </ng-container>

      <!-- Header and Row Declarations -->
      <tr mat-header-row *matHeaderRowDef="displayedColumns" class="bg-green-50"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="hover:bg-gray-100 cursor-pointer"></tr>
    </table>
  </div>
</div>
