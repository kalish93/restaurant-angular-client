<div class="restaurant-list-container">
  <div class="header">
    <h1>Order History</h1>
  </div>
  <div class="table-and-paginator">
    <mat-paginator [pageSizeOptions]="[5, 10, 20]" [pageSize]="pageSize"
      showFirstLastButtons (page)="pageChanged($event)">
    </mat-paginator>
    <table mat-table [dataSource]="orders" class="mat-elevation-z8" matSort>

      <ng-container matColumnDef="tableNumber">
        <th mat-header-cell *matHeaderCellDef>Table</th>
        <td mat-cell *matCellDef="let order">{{ order.table.number }}</td>
      </ng-container>

      <ng-container matColumnDef="items">
        <th mat-header-cell *matHeaderCellDef>Items</th>
        <td mat-cell *matCellDef="let order">
          @for (item of order.items; track item) {
            <div>
              {{ item.menuItem.name }} ({{ item.quantity }})
            </div>
          }
        </td>
      </ng-container>

      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef>Status</th>
        <td mat-cell *matCellDef="let order">{{ order.status }}</td>
      </ng-container>

      <ng-container matColumnDef="createdAt">
        <th mat-header-cell *matHeaderCellDef>Ordered At</th>
        <td mat-cell *matCellDef="let order">{{ order.createdAt | date:'medium'  }}</td>
      </ng-container>

      <!-- Header and Row Declarations -->
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="navigateToDetail(row.id)"></tr>

    </table>
  </div>
</div>
